require('source-map-support').install();
(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define('PDFViewer',[],b):'object'==typeof exports?exports.PDFViewer=b():a.PDFViewer=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='./',b(b.s=9)}([function(a){a.exports=require('react')},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=function(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}(['\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n'],['\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n']),k=g.a.div(j);b['default']=function(a){return Object(d.createElement)(k,null,Object(d.createElement)(i.a,a))}},function(a){a.exports=require('styled-components')},function(a){a.exports=require('@atlaskit/spinner')},function(a){a.exports=require('prop-types')},function(a){a.exports=require('react-pdf')},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=c(0),h=c.n(g),i=c(4),j=c.n(i),k=c(5),l=c.n(k),m=c(1),n=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();k.pdfjs.GlobalWorkerOptions.workerSrc='//cdnjs.cloudflare.com/ajax/libs/pdf.js/'+k.pdfjs.version+'/pdf.worker.js';var o=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),n(b,[{key:'componentDidMount',value:function(){console.log('componentDidMount')}},{key:'render',value:function(){var a=this.props,b=a.index,c=a.data,d=a.style,e=c.scale;return Object(g.createElement)('div',{style:d},Object(g.createElement)('div',{style:{display:'flex',justifyContent:'center',padding:32,alignItems:'center',height:'100%',boxSizing:'border-box',overflow:'hidden'}},Object(g.createElement)(k.Page,{pageNumber:this.props.index+1,scale:e,loading:Object(g.createElement)(m['default'],null),renderAnnotationLayer:!1,onLoadError:function(a){return console.error(a)}})))}}]),b}(g.PureComponent);Object.defineProperty(o,'propTypes',{enumerable:!0,writable:!0,value:{index:j.a.number.isRequired,style:j.a.object.isRequired,data:j.a.object.isRequired}}),b['default']=o},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=c(0),h=c.n(g),i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b['default']=function(a){return function(b){function c(a){d(this,c);var b=e(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return b.props=a,b}return f(c,b),i(c,[{key:'componentDidMount',value:function(){}},{key:'componentWillUnmount',value:function(){}},{key:'render',value:function(){return Object(g.createElement)(a,this.props)}}]),c}(g.Component)}},,function(a,b,c){a.exports=c(10)},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=c(0),h=c.n(g),i=c(4),j=c.n(i),k=c(2),l=c.n(k),m=c(11),n=c.n(m),o=c(5),p=c.n(o),q=c(12),r=c.n(q),s=c(13),t=c.n(s),u=c(14),v=c.n(u),w=c(6),x=c(1),y=c(7),z=c(15),A=c.n(z),B=c(16),C=c.n(B),D=c(17),E=c.n(D),F=c(18),G=c.n(F),H=c(19),I=c.n(H),J=c(20),K=c.n(J),L=c(21),M=c.n(L),N=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},O=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),P=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Q=function(a,b){return Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}(['\n  display: flex;\n  flex-direction: column;\n  background-color: #404040;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n\n  & .react-pdf__message {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: 16px;\n  }\n'],['\n  display: flex;\n  flex-direction: column;\n  background-color: #404040;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n\n  & .react-pdf__message {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: 16px;\n  }\n']),R=l.a.div(Q),S=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return T.call(c),c.state={pdf:null,cachedPageDimensions:null,responsiveScale:1,isFullscreen:!!document.fullscreenElement,currentPage:1},c}return f(b,a),P(b,[{key:'componentDidMount',value:function(){this.ref.addEventListener('fullscreenchange',this.handleFullscreenChange.bind(this),!1),document.addEventListener('keydown',this.handleKeydown.bind(this),!1),window.addEventListener('resize',Object(m.debounce)(200,this.handleResize.bind(this)),!1)}},{key:'componentWillUnmount',value:function(){this.ref.removeEventListener('fullscreenchange',this.handleFullscreenChange.bind(this),!1),document.removeEventListener('keydown',this.handleKeydown.bind(this),!1),window.removeEventListener('resize',Object(m.debounce)(200,this.handleResize.bind(this)),!1)}},{key:'cachePageDimensions',value:function(a){var b=this,c=Array.from({length:a.numPages},function(a,b){return b+1}).map(function(b){return a.getPage(b)}),d=0;Promise.all(c).then(function(a){var c=new Map,e=!0,f=!1,g=void 0;try{for(var i,j=a[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value,l=k.view[2]*b.props.scale,m=k.view[3]*b.props.scale;c.set(k.pageIndex+1,[l+64,m+64]),d+=m}}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}b.setState({cachedPageDimensions:c,initialContainerHeight:d,containerHeight:d,isDocument:1<a[0].view[3]/a[0].view[2]},b.handleResize)})}},{key:'handleResize',value:function(){var a=this.state,b=a.currentPage,c=a.cachedPageDimensions,d=a.isDocument;if(!d){var e=window,f=e.innerWidth,g=e.innerHeight,i=c.get(b),j=O(i,2),k=j[0],l=j[1],h=g*(k/l)>f?f/k:g/l;this.setState({responsiveScale:h})}}},{key:'computeRowHeight',value:function(a){var b=a.index,c=this.state,d=c.cachedPageDimensions,e=c.responsiveScale;return d&&e?d.get(b+1)[1]/e:768}},{key:'onDocumentLoadSuccess',value:function(a){this.setState({pdf:a}),this.cachePageDimensions(a)}},{key:'handleZoomIn',value:function(){this.setState({responsiveScale:this.state.responsiveScale+.1})}},{key:'handleZoomOut',value:function(){this.setState({responsiveScale:this.state.responsiveScale-.1})}},{key:'handleFullscreenChange',value:function(){this.setState({isFullscreen:!!document.fullscreenElement})}},{key:'toggleFullscreen',value:function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():this.ref.requestFullscreen()}},{key:'handlePreviousPage',value:function(){this.setState({currentPage:this.state.currentPage-1}),this.handleResize()}},{key:'handleNextPage',value:function(){this.setState({currentPage:this.state.currentPage+1}),this.handleResize()}},{key:'handleKeydown',value:function(a){var b=this.state,c=b.currentPage,d=b.pdf;switch(a.keyCode){case 37:1<c&&this.handlePreviousPage();break;case 39:c<d.numPages&&this.handleNextPage();}}},{key:'render',value:function(){var a=this,b=this.props.file,c=this.state,d=c.error,e=c.cachedPageDimensions,f=c.pdf,h=c.isFullscreen,i=c.isDocument,j=c.currentPage;return Object(g.createElement)(R,{innerRef:function(b){return a.ref=b}},Object(g.createElement)('div',{style:{display:'flex',background:'rgb(244, 245, 247)',textAlign:'right',justifyContent:'space-between'}},e&&Object(g.createElement)(u.ButtonGroup,null,Object(g.createElement)(v.a,{appearance:'subtle',isDisabled:1===j,iconBefore:Object(g.createElement)(I.a,null),onClick:function(){return a.handlePreviousPage()}}),Object(g.createElement)('div',{style:{display:'flex',alignItems:'center'}},this.state.currentPage,' of ',f.numPages),Object(g.createElement)(v.a,{appearance:'subtle',isDisabled:j===f.numPages,iconBefore:Object(g.createElement)(K.a,null),onClick:function(){return a.handleNextPage()}})),Object(g.createElement)(u.ButtonGroup,null,Object(g.createElement)(v.a,{appearance:'subtle',iconBefore:Object(g.createElement)(E.a,null),onClick:function(){return a.handleZoomIn()}}),Object(g.createElement)(v.a,{appearance:'subtle',iconBefore:Object(g.createElement)(G.a,null),onClick:function(){return a.handleZoomOut()}}),Object(g.createElement)(v.a,{appearance:'subtle',iconBefore:h?Object(g.createElement)(C.a,null):Object(g.createElement)(A.a,null),onClick:function(){return a.toggleFullscreen()}}))),Object(g.createElement)('div',{style:{flex:1}},Object(g.createElement)(q.AutoSizer,null,function(c){var d=c.height,h=c.width;return Object(g.createElement)(o.Document,{file:b,loading:Object(g.createElement)(x['default'],{invertColor:!0}),onLoadSuccess:a.onDocumentLoadSuccess.bind(a),onLoadError:function(b){return a.renderError('Error while loading document: '+b)},options:{cMapUrl:'cmaps/',cMapPacked:!0}},e&&Object(g.createElement)(g.Fragment,null,i?Object(g.createElement)(q.List,{width:h,height:d,rowCount:f.numPages,rowHeight:a.computeRowHeight.bind(a),rowRenderer:a.rowRenderer,overscanRowCount:3,estimatedRowSize:a.computeRowHeight({index:0})}):Object(g.createElement)(w['default'],{data:{scale:a.state.responsiveScale},index:j-1,style:{width:h,height:d}})))})))}}]),b}(g.PureComponent);Object.defineProperty(S,'propTypes',{enumerable:!0,writable:!0,value:{scale:j.a.number.isRequired}}),Object.defineProperty(S,'defaultProps',{enumerable:!0,writable:!0,value:{scale:1,margin:32}});var T=function(){var a=this;Object.defineProperty(this,'rowRenderer',{enumerable:!0,writable:!0,value:function(b){return Object(g.createElement)(w['default'],N({data:{scale:a.state.responsiveScale}},b))}}),Object.defineProperty(this,'renderError',{enumerable:!0,writable:!0,value:function(a){return Object(g.createElement)(t.a,{appearance:'error',title:'An error occured',style:{width:'100%'}},a)}})};b['default']=Object(y['default'])(S)},function(a){a.exports=require('throttle-debounce')},function(a){a.exports=require('react-virtualized')},function(a){a.exports=require('@atlaskit/section-message')},function(a){a.exports=require('@atlaskit/button')},function(a){a.exports=require('@atlaskit/icon/glyph/vid-full-screen-on')},function(a){a.exports=require('@atlaskit/icon/glyph/vid-full-screen-off')},function(a){a.exports=require('@atlaskit/icon/glyph/media-services/zoom-in')},function(a){a.exports=require('@atlaskit/icon/glyph/media-services/zoom-out')},function(a){a.exports=require('@atlaskit/icon/glyph/arrow-left')},function(a){a.exports=require('@atlaskit/icon/glyph/arrow-right')},function(a){a.exports=require('react-pdf/dist/Page/AnnotationLayer.css')}])});
//# sourceMappingURL=PDFViewer.js.map